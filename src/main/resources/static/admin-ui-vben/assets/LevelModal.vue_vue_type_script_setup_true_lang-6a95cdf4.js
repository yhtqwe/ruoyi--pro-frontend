import{d as _,c as T,r as v,k as t,o as P,j as S,w as h,n as C,af as O,y as R}from"./index-84bac5b8.js";import"./index-1beb4355.js";import"./BasicForm.vue_vue_type_style_index_0_lang-f40c69bb.js";import{a as w,B as L}from"./index-173d5d49.js";import"./sortable.esm-f208c0d8.js";import{u as n}from"./useRender-70a86cea.js";import{D as i,g as c}from"./dict-5c702769.js";import{u as U,_ as k}from"./useForm-9e126d4c.js";import{g as y,u as F,c as N}from"./index-ae82e726.js";const Y=[{title:"编号",dataIndex:"id"},{title:"等级图标",dataIndex:"icon",customRender:({text:e})=>n.renderImg(e)},{title:"等级背景图",dataIndex:"remark",customRender:({text:e})=>n.renderImg(e)},{title:"等级名称",dataIndex:"name"},{title:"等级",dataIndex:"level"},{title:"升级经验",dataIndex:"experience"},{title:"享受折扣(%)",dataIndex:"discountPercent"},{title:"状态",dataIndex:"status",customRender:({text:e})=>n.renderDict(e,i.COMMON_STATUS)},{title:"创建时间",dataIndex:"createTime",customRender:({text:e})=>n.renderDate(e)}],z=[{label:"等级名称",field:"name",component:"Input",colProps:{span:8}},{label:"状态",field:"status",component:"Select",componentProps:{options:c(i.COMMON_STATUS)},colProps:{span:8}}],A=[{label:"编号",field:"id",show:!1,component:"Input"},{label:"等级名称",field:"name",required:!0,component:"Input"},{label:"等级",field:"level",required:!0,component:"InputNumber"},{label:"升级经验",field:"experience",required:!0,component:"InputNumber"},{label:"享受折扣(%)",field:"discountPercent",required:!0,component:"InputNumber"},{label:"等级图标",field:"icon",component:"FileUpload",componentProps:{maxCount:1,fileType:"image"}},{label:"背景图",field:"backgroundUrl",component:"FileUpload",componentProps:{maxCount:1,fileType:"image"}},{label:"状态",field:"status",component:"Select",componentProps:{options:c(i.COMMON_STATUS)}},{label:"备注",field:"remark",component:"InputTextArea"}],H=_({name:"MemberLevelModal",__name:"LevelModal",emits:["success","register"],setup(e,{emit:d}){const m=d,{t:s}=T(),{createMessage:p}=R(),o=v(!0),[u,{setFieldsValue:f,resetFields:g,validate:I}]=U({labelWidth:120,baseColProps:{span:24},schemas:A,showActionButtonGroup:!1,actionColOptions:{span:23}}),[b,{setModalProps:r,closeModal:x}]=w(async a=>{if(g(),r({confirmLoading:!1}),o.value=!!a?.isUpdate,t(o)){const l=await y(a.record.id);f({...l})}});async function M(){try{const a=await I();r({confirmLoading:!0}),t(o)?await F(a):await N(a),x(),m("success"),p.success(s("common.saveSuccessText"))}finally{r({confirmLoading:!1})}}return(a,l)=>(P(),S(t(L),O(a.$attrs,{title:o.value?t(s)("action.edit"):t(s)("action.create"),onRegister:t(b),onOk:M}),{default:h(()=>[C(t(k),{onRegister:t(u)},null,8,["onRegister"])]),_:1},16,["title","onRegister"]))}});export{H as _,Y as c,z as s};
