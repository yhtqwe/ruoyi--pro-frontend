import{f as _,g as y,u as M,c as h}from"./template-bfd48f0f.js";import{d as w,c as T,r as v,k as e,o as B,j as N,w as k,n as C,af as F,y as R}from"./index-2b36f9e3.js";import{u as b,_ as x}from"./useForm-2cb760a4.js";import"./BasicForm.vue_vue_type_style_index_0_lang-da06c4a7.js";import{a as L,B as P}from"./index-ab29420a.js";const j=w({name:"NotifyTemplateModal",__name:"TemplateModal",emits:["success","register"],setup(S,{emit:r}){const n=r,{t}=T(),{createMessage:c}=R(),a=v(!0),[l,{setFieldsValue:m,resetFields:f,validate:u}]=b({labelWidth:120,baseColProps:{span:24},schemas:_,showActionButtonGroup:!1,actionColOptions:{span:23}}),[p,{setModalProps:o,closeModal:d}]=L(async s=>{if(f(),o({confirmLoading:!1}),a.value=!!s?.isUpdate,e(a)){const i=await y(s.record.id);m({...i})}});async function g(){try{const s=await u();o({confirmLoading:!0}),e(a)?await M(s):await h(s),d(),n("success"),c.success(t("common.saveSuccessText"))}finally{o({confirmLoading:!1})}}return(s,i)=>(B(),N(e(P),F(s.$attrs,{title:a.value?e(t)("action.edit"):e(t)("action.create"),onRegister:e(p),onOk:g}),{default:k(()=>[C(e(x),{onRegister:e(l)},null,8,["onRegister"])]),_:1},16,["title","onRegister"]))}});export{j as _};
