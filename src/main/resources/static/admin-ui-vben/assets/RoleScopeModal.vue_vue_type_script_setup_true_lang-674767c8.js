import{d as y}from"./role.data-11ad06f2.js";import{d as R,c as k,r as w,k as a,o as b,j as B,w as n,n as c,af as F,y as C}from"./index-84bac5b8.js";import{u as D,_ as I}from"./useForm-9e126d4c.js";import"./BasicForm.vue_vue_type_style_index_0_lang-f40c69bb.js";import{a as x,B as L}from"./index-173d5d49.js";import{_ as P}from"./index-5d8c1269.js";import{g as $}from"./index-6782430b.js";import{l as O}from"./index-6d7d07dc.js";import{h as T}from"./tree-a6f36781.js";import{b as U}from"./index-b4088324.js";const K=R({name:"SystemRoleScopeModal",__name:"RoleScopeModal",emits:["success","register"],setup(V,{emit:l}){const m=l,{t:d}=k(),{createMessage:p}=C(),o=w([]),[u,{setFieldsValue:f,resetFields:g,validate:_}]=D({labelWidth:120,baseColProps:{span:24},schemas:y,showActionButtonGroup:!1,actionColOptions:{span:23}}),[h,{setModalProps:t,closeModal:S}]=x(async e=>{if(g(),t({confirmLoading:!1}),a(o).length===0){const s=await O();o.value=T(s,"id")}const r=await $(e.record.id);r.roleId=e.record.id,f({...r})});async function v(){try{const e=await _();t({confirmLoading:!0}),await U(e),S(),m("success"),p.success(d("common.saveSuccessText"))}finally{t({confirmLoading:!1})}}return(e,r)=>(b(),B(a(L),F(e.$attrs,{title:"编辑角色数据权限",onRegister:a(h),onOk:v}),{default:n(()=>[c(a(I),{onRegister:a(u)},{dataScopeDeptIds:n(({model:s,field:i})=>[c(a(P),{value:s[i],"onUpdate:value":M=>s[i]=M,"tree-data":o.value,"field-names":{title:"name",key:"id"},"check-strictly":!1,checkable:"",toolbar:"",title:"部门分配"},null,8,["value","onUpdate:value","tree-data"])]),_:1},8,["onRegister"])]),_:1},16,["onRegister"]))}});export{K as _};
