import{d as g,c as w,r as x,k as e,o as q,j as M,w as b,n as _,af as A,y as R}from"./index-84bac5b8.js";import"./index-1beb4355.js";import"./BasicForm.vue_vue_type_style_index_0_lang-f40c69bb.js";import{a as k,B as S}from"./index-173d5d49.js";import"./sortable.esm-f208c0d8.js";import{u as y}from"./useRender-70a86cea.js";import{u as v,_ as B}from"./useForm-9e126d4c.js";import{g as C,u as F,c as L}from"./index-aab9a46b.js";const H=[{title:"编号",dataIndex:"id",defaultHidden:!0,width:100},{title:"名称",dataIndex:"name",width:180},{title:"微信号",dataIndex:"account",width:100},{title:"appId",dataIndex:"appId",width:120},{title:"服务器地址(URL)",dataIndex:"appIdURL",width:120,customRender:({record:a})=>`http://服务端地址/mp/open/${a.appId}`},{title:"二维码",dataIndex:"qrCodeUrl",width:180,customRender:({text:a})=>y.renderImg(a)},{title:"备注",dataIndex:"remark",width:180}],K=[{label:"名称",field:"name",component:"Input",colProps:{span:8}}],U=[{label:"编号",field:"id",show:!1,component:"Input"},{label:"名称",field:"name",required:!0,component:"Input"},{label:"微信号",field:"account",helpMessage:"在微信公众平台（mp.weixin.qq.com）的菜单 [设置与开发 - 公众号设置 - 账号详情] 中能找到「微信号」",required:!0,component:"Input"},{label:"公众号 appId",field:"appId",helpMessage:"在微信公众平台（mp.weixin.qq.com）的菜单 [设置与开发 - 公众号设置 - 基本设置] 中能找到「开发者ID(AppID)」",required:!0,component:"Input"},{label:"公众号 appSecret",field:"appSecret",helpMessage:"在微信公众平台（mp.weixin.qq.com）的菜单 [设置与开发 - 公众号设置 - 基本设置] 中能找到「开发者密码(AppSecret)」",required:!0,component:"Input"},{label:"公众号token",field:"token",required:!0,component:"Input"},{label:"消息加解密密钥",field:"aesKey",required:!0,component:"Input"},{label:"备注",field:"remark",component:"InputTextArea"}],N=g({name:"MpAccountModal",__name:"AccountModal",emits:["success","register"],setup(a,{emit:i}){const c=i,{t:o}=w(),{createMessage:d}=R(),n=x(!0),[l,{setFieldsValue:p,resetFields:u,validate:m}]=v({labelWidth:120,baseColProps:{span:24},schemas:U,showActionButtonGroup:!1,actionColOptions:{span:23}}),[f,{setModalProps:s,closeModal:I}]=k(async t=>{if(u(),s({confirmLoading:!1}),n.value=!!t?.isUpdate,e(n)){const r=await C(t.record.id);p({...r})}});async function h(){try{const t=await m();s({confirmLoading:!0}),e(n)?await F(t):await L(t),I(),c("success"),d.success(o("common.saveSuccessText"))}finally{s({confirmLoading:!1})}}return(t,r)=>(q(),M(e(S),A(t.$attrs,{title:n.value?e(o)("action.edit"):e(o)("action.create"),onRegister:e(f),onOk:h}),{default:b(()=>[_(e(B),{onRegister:e(l)},null,8,["onRegister"])]),_:1},16,["title","onRegister"]))}});export{N as _,H as c,K as s};
