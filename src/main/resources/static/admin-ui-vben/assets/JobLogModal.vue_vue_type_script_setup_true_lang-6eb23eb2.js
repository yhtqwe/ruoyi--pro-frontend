import{b1 as i,L as d,d as p,r as u,o as f,j as g,w as b,n as T,k as n,af as h}from"./index-2b36f9e3.js";import"./index-238a0b12.js";import"./BasicForm.vue_vue_type_style_index_0_lang-da06c4a7.js";import{a as x,B as I}from"./index-ab29420a.js";import"./sortable.esm-f208c0d8.js";import{u as r}from"./useRender-e7048bde.js";import{D as l,g as _}from"./dict-d92cc9bc.js";import{J as D}from"./index-23d73b40.js";import{D as P}from"./index-a69dfc8a.js";import{u as w}from"./useDescription-296e4c96.js";const $=[{title:"日志编号",dataIndex:"id",width:100},{title:"任务编号",dataIndex:"jobId",width:100},{title:"处理器的名字",dataIndex:"handlerName",width:180},{title:"处理器的参数",dataIndex:"handlerParam",width:180},{title:"第几次执行",dataIndex:"executeIndex",width:100},{title:"执行时间",dataIndex:"beginTime",width:180,customRender:({record:e})=>{const t=r.renderDate(e.beginTime),a=r.renderDate(e.endTime);return r.renderTags([t,a])}},{title:"执行时长",dataIndex:"duration",width:180,customRender:({text:e})=>r.renderText(e," 毫秒")},{title:"任务状态",dataIndex:"status",width:180,customRender:({record:e})=>r.renderDict(e.status,l.INFRA_JOB_LOG_STATUS)}],C=[{label:"处理器的名字",field:"handlerName",component:"Input",colProps:{span:8}},{label:"开始执行时间",field:"beginTime",component:"DatePicker",colProps:{span:8}},{label:"结束执行时间",field:"endTime",component:"DatePicker",colProps:{span:8}},{label:"任务状态",field:"status",component:"Select",componentProps:{options:_(l.INFRA_JOB_STATUS)},colProps:{span:8}},{label:"处理器的名字",field:"handlerName",component:"Input",colProps:{span:8}}],J=[{label:"日志编号",field:"id"},{label:"任务编号",field:"jobId"},{label:"处理器的名字",field:"handlerName"},{label:"处理器的参数",field:"handlerParam"},{label:"第几次执行",field:"executeIndex"},{label:"执行时间",field:"beginTime",render:(e,t)=>{const a=`开始: ${r.renderDate(t.beginTime)}`,o=`结束: ${r.renderDate(t.endTime)}`;return i("span",{},[a,i("br"),o])}},{label:"执行时长",field:"duration",render:e=>r.renderText(e," 毫秒")},{label:"任务状态",field:"status",render:e=>r.renderDict(e,l.INFRA_JOB_LOG_STATUS)},{label:"执行结果",field:"result",render:e=>{const t=JSON.parse(e);return i(D,{data:t})}}];function U(e){return d.get({url:"/infra/job-log/page",params:e})}function R(e){return d.get({url:`/infra/job-log/get?id=${e}`})}function v(e){return d.download({url:"/infra/job-log/export-excel",params:e},"定时任务日志.xls")}const G=p({name:"InfraJobLogModal",__name:"JobLogModal",setup(e){const t=u(),[a]=w({schema:J,data:t}),[o,{setModalProps:m}]=x(async s=>{m({confirmLoading:!1});const c=await R(s.record.id);t.value=c});return(s,c)=>(f(),g(n(I),h(s.$attrs,{title:"查看详情",onRegister:n(o)}),{default:b(()=>[T(n(P),{column:2,onRegister:n(a)},null,8,["onRegister"])]),_:1},16,["onRegister"]))}});export{G as _,$ as c,v as e,U as g,C as s};
