import{d as M,c as w,r as C,k as e,o as b,j as P,w as T,n as x,af as A,y as O}from"./index-84bac5b8.js";import"./index-1beb4355.js";import"./BasicForm.vue_vue_type_style_index_0_lang-f40c69bb.js";import{a as R,B as k}from"./index-173d5d49.js";import"./sortable.esm-f208c0d8.js";import{u as i}from"./useRender-70a86cea.js";import{D as s,g as l}from"./dict-5c702769.js";import{u as U,_ as y}from"./useForm-9e126d4c.js";import{g as D,u as N,c as E}from"./index-70ebb9ee.js";const j=[{title:"编号",dataIndex:"id",width:100},{title:"短信签名",dataIndex:"signature",width:180},{title:"渠道编码",dataIndex:"code",width:180,customRender:({text:a})=>i.renderDict(a,s.SYSTEM_SMS_CHANNEL_CODE)},{title:"启用状态",dataIndex:"status",width:180,customRender:({text:a})=>i.renderDict(a,s.COMMON_STATUS)},{title:"备注",dataIndex:"remark",width:180},{title:"短信 API 的账号",dataIndex:"apiKey",width:180},{title:"短信 API 的密钥",dataIndex:"apiSecret",width:180},{title:"短信发送回调 URL",dataIndex:"callbackUrl",width:180},{title:"创建时间",dataIndex:"createTime",width:180,customRender:({text:a})=>i.renderDate(a)}],G=[{label:"短信签名",field:"signature",component:"Input",colProps:{span:8}},{label:"启用状态",field:"status",component:"Select",componentProps:{options:l(s.COMMON_STATUS)},colProps:{span:8}},{label:"创建时间",field:"createTime",component:"RangePicker",colProps:{span:8}}],L=[{label:"编号",field:"id",show:!1,component:"Input"},{label:"短信签名",field:"signature",required:!0,component:"Input"},{label:"渠道编码",field:"code",component:"Select",required:!0,componentProps:{options:l(s.SYSTEM_SMS_CHANNEL_CODE,"string")}},{label:"启用状态",field:"status",component:"Select",defaultValue:0,componentProps:{options:l(s.COMMON_STATUS)}},{label:"备注",field:"remark",component:"InputTextArea"},{label:"短信 API 的账号",field:"apiKey",required:!0,component:"Input"},{label:"短信 API 的密钥",field:"apiSecret",component:"Input"},{label:"短信发送回调 URL",field:"callbackUrl",component:"Input"}],W=M({name:"SystemSmsChannelModal",__name:"SmsChannelModal",emits:["success","register"],setup(a,{emit:d}){const m=d,{t:o}=w(),{createMessage:p}=O(),n=C(!0),[u,{setFieldsValue:f,resetFields:S,validate:h}]=U({labelWidth:120,baseColProps:{span:24},schemas:L,showActionButtonGroup:!1,actionColOptions:{span:23}}),[I,{setModalProps:r,closeModal:g}]=R(async t=>{if(S(),r({confirmLoading:!1}),n.value=!!t?.isUpdate,e(n)){const c=await D(t.record.id);f({...c})}});async function _(){try{const t=await h();r({confirmLoading:!0}),e(n)?await N(t):await E(t),g(),m("success"),p.success(o("common.saveSuccessText"))}finally{r({confirmLoading:!1})}}return(t,c)=>(b(),P(e(k),A(t.$attrs,{title:n.value?e(o)("action.edit"):e(o)("action.create"),onRegister:e(I),onOk:_}),{default:T(()=>[x(e(y),{onRegister:e(u)},null,8,["onRegister"])]),_:1},16,["title","onRegister"]))}});export{W as _,j as c,G as s};
