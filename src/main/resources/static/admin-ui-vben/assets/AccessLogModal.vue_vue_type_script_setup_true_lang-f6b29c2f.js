import{b1 as d,d as u,r as p,o as m,j as f,w as g,n as b,k as s,af as h}from"./index-84bac5b8.js";import"./index-1beb4355.js";import"./BasicForm.vue_vue_type_style_index_0_lang-f40c69bb.js";import{a as T,B as I}from"./index-173d5d49.js";import"./sortable.esm-f208c0d8.js";import{u as r}from"./useRender-70a86cea.js";import{D as i,g as P}from"./dict-5c702769.js";import{D as w}from"./index-d97670a9.js";import{u as D}from"./useDescription-e7cd1424.js";const y=[{title:"日志编号",dataIndex:"id",width:100},{title:"用户编号",dataIndex:"userId",width:100},{title:"用户类型",dataIndex:"userType",width:120,customRender:({text:e})=>r.renderDict(e,i.USER_TYPE)},{title:"应用名",dataIndex:"applicationName",width:120},{title:"请求方法名",dataIndex:"requestMethod",width:120},{title:"请求地址",dataIndex:"requestUrl",width:250},{title:"请求时间",dataIndex:"beginTime",width:180,customRender:({text:e})=>r.renderDate(e)},{title:"执行时长",dataIndex:"duration",width:180,customRender:({text:e})=>r.renderText(e.toString(),"ms")},{title:"操作结果",dataIndex:"status",width:180,ellipsis:!0,customRender:({record:e})=>{const t=e.resultCode===0;return r.renderTag(t?"成功":"失败",t?"#87d068":"#f50")}}],A=[{label:"用户编号",field:"userId",component:"Input",colProps:{span:8}},{label:"用户类型",field:"userType",component:"Select",componentProps:{options:P(i.USER_TYPE)},colProps:{span:8}},{label:"应用名",field:"applicationName",component:"Input",colProps:{span:8}},{label:"请求地址",field:"requestUrl",component:"Input",colProps:{span:8}},{label:"请求时间",field:"beginTime",component:"RangePicker",colProps:{span:8}},{label:"执行时长",field:"duration",component:"Input",colProps:{span:8}},{label:"结果码",field:"resultCode",component:"Input",colProps:{span:8}}],x=[{value:"GET",color:"#108ee9"},{value:"POST",color:"#2db7f5"},{value:"PUT",color:"warning"},{value:"DELETE",color:"#f50"}],_=[{label:"日志id",field:"id"},{label:"链路id",field:"traceId",show:e=>e&&e.traceId&&e.traceId!==""},{label:"应用名称",field:"applicationName",labelMinWidth:100},{field:"userId",label:"用户id",render(e,t){const n=r.renderDict(t.userType,i.USER_TYPE),o=r.renderTag(`uid: ${e}`);return d("span",{},[n,o])}},{field:"resultCode",label:"请求结果",render(e){return r.renderTag(e===0?"成功":"失败",e===0?"#87d068":"#f50")}},{field:"resultMsg",label:"响应信息",show(e){return e&&e.resultMsg&&e.resultMsg!==""},render(e){return d("span",{style:{color:"red",fontWeight:"bold"}},e)}},{field:"userIp",label:"请求ip"},{field:"userAgent",label:"userAgent"},{field:"beginTime",label:"请求时间",render(e){return r.renderDate(e)}},{field:"requestUrl",label:"请求路径",render(e,t){if(!t)return"";const{requestMethod:n,requestUrl:o}=t,a=x.find(c=>c.value===n.toUpperCase()),l=a?r.renderTag(n,a.color):n;return d("span",{},[l,o])}},{field:"requestParams",label:"请求参数",render(e){return r.renderJsonPreview(e)}},{field:"beginTime",label:"请求开始时间",render(e){return r.renderDate(e)}},{field:"endTime",label:"请求结束时间",render(e){return r.renderDate(e)}},{field:"duration",label:"请求耗时",render(e){return r.renderText(String(e),"ms")}}],B=u({name:"AcessLogModal",__name:"AccessLogModal",setup(e){const t=p(),[n,{closeModal:o}]=T(l=>{t.value=l}),[a]=D({column:1,schema:_,data:t});return(l,c)=>(m(),f(s(I),h(l.$attrs,{title:"访问日志详情",width:"800px",onRegister:s(n),onOk:s(o)}),{default:g(()=>[b(s(w),{onRegister:s(a)},null,8,["onRegister"])]),_:1},16,["onRegister","onOk"]))}});export{B as _,y as c,A as s};
