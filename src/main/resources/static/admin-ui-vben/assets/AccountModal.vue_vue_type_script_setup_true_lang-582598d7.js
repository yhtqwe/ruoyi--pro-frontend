import{d as M,c as b,r as _,k as e,o as S,j as A,w as P,n as R,af as x,y as T}from"./index-84bac5b8.js";import"./index-1beb4355.js";import"./BasicForm.vue_vue_type_style_index_0_lang-f40c69bb.js";import{a as B,B as N}from"./index-173d5d49.js";import"./sortable.esm-f208c0d8.js";import{u as i}from"./useRender-70a86cea.js";import{D as l,g as q}from"./dict-5c702769.js";import{u as F,_ as L}from"./useForm-9e126d4c.js";import{g as O,u as y,c as v}from"./account-e11a78bd.js";const W=[{title:"编号",dataIndex:"id",width:100},{title:"邮箱",dataIndex:"mail",width:180},{title:"用户名",dataIndex:"username",width:100},{title:"SMTP 服务器域名",dataIndex:"host",width:120},{title:"SMTP 服务器端口",dataIndex:"port",width:120},{title:"是否开启 SSL",dataIndex:"sslEnable",width:180,customRender:({text:a})=>i.renderDict(a,l.INFRA_BOOLEAN_STRING)},{title:"创建时间",dataIndex:"createTime",width:180,customRender:({text:a})=>i.renderDate(a)}],Y=[{label:"邮箱",field:"mail",component:"Input",colProps:{span:8}},{label:"用户名",field:"username",component:"Input",colProps:{span:8}}],C=[{label:"编号",field:"id",show:!1,component:"Input"},{label:"邮箱",field:"mail",required:!0,component:"Input",helpMessage:"填写发件邮箱地址",rules:[{required:!0,message:"请输入正确的邮箱地址",pattern:/^\w{3,}(\.\w+)*@[A-z0-9]+(\.[A-z]{2,5}){1,2}$/,trigger:"blur"}]},{label:"用户名",field:"username",required:!0,component:"Input"},{label:"密码/授权码",field:"password",required:!0,component:"InputPassword",helpMessage:"填写邮件密码, 部分邮件商需要填写授权码"},{label:"SMTP 服务器域名",field:"host",required:!0,component:"Input"},{label:"SMTP 服务器端口",field:"port",required:!0,component:"InputNumber"},{label:"是否开启 SSL",field:"sslEnable",required:!0,defaultValue:!1,component:"RadioButtonGroup",componentProps:{options:q(l.INFRA_BOOLEAN_STRING,"boolean")}}],H=M({name:"SystemMailAccountModal",__name:"AccountModal",emits:["success","register"],setup(a,{emit:c}){const d=c,{t:o}=b(),{createMessage:u}=T(),s=_(!0),[m,{setFieldsValue:p,resetFields:f,validate:g}]=F({labelWidth:120,baseColProps:{span:24},schemas:C,showActionButtonGroup:!1,actionColOptions:{span:23}}),[I,{setModalProps:n,closeModal:h}]=B(async t=>{if(f(),n({confirmLoading:!1}),s.value=!!t?.isUpdate,e(s)){const r=await O(t.record.id);p({...r})}});async function w(){try{const t=await g();n({confirmLoading:!0}),e(s)?await y(t):await v(t),h(),d("success"),u.success(o("common.saveSuccessText"))}finally{n({confirmLoading:!1})}}return(t,r)=>(S(),A(e(N),x(t.$attrs,{title:s.value?e(o)("action.edit"):e(o)("action.create"),onRegister:e(I),onOk:w}),{default:P(()=>[R(e(L),{onRegister:e(m)},null,8,["onRegister"])]),_:1},16,["title","onRegister"]))}});export{H as _,W as c,Y as s};
