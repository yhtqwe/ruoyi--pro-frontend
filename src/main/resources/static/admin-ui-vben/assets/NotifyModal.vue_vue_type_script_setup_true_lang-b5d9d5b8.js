import{e as f}from"./index-6d9cd4eb.js";import{L as m,d as T,r as s,o as I,j as h,w as _,n as o,k as a,af as x}from"./index-2b36f9e3.js";import"./index-238a0b12.js";import"./BasicForm.vue_vue_type_style_index_0_lang-da06c4a7.js";import{a as P,B as b}from"./index-ab29420a.js";import"./sortable.esm-f208c0d8.js";import{u as t}from"./useRender-e7048bde.js";import{D as r,g as c}from"./dict-d92cc9bc.js";import{D as g}from"./index-a69dfc8a.js";import{_ as y}from"./BasicTable.vue_vue_type_script_setup_true_lang-ba4f6a37.js";import"./index-23d73b40.js";import{D}from"./index-e3989e7b.js";const L=[{title:"任务编号",dataIndex:"id",width:100},{title:"应用编号",dataIndex:"appName",width:200},{title:"商户订单编号",dataIndex:"merchantOrderId",width:200},{title:"通知类型",dataIndex:"type",width:100,customRender:({text:e})=>t.renderDict(e,r.PAY_NOTIFY_TYPE)},{title:"关联编号",dataIndex:"dataId",width:200},{title:"通知状态",dataIndex:"status",width:100,customRender:({text:e})=>t.renderDict(e,r.PAY_NOTIFY_STATUS)},{title:"最后通知时间",dataIndex:"lastExecuteTime",width:180,customRender:({text:e})=>t.renderDate(e)},{title:"下次通知时间",dataIndex:"nextNotifyTime",width:180,customRender:({text:e})=>t.renderDate(e)},{title:"最大通知次数",dataIndex:"maxNotifyTimes",width:120,ifShow:!1},{title:"通知次数",dataIndex:"notifyTimes",width:120,customRender:({record:e,text:n})=>t.renderTag(`${n}/${e.maxNotifyTimes}`)}],U=[{label:"应用编号",field:"appId",component:"ApiSelect",componentProps:{api:()=>f(),labelField:"name",valueField:"id"},colProps:{span:8}},{label:"通知类型",field:"type",component:"Select",componentProps:{options:c(r.PAY_NOTIFY_TYPE,"number")},colProps:{span:8}},{label:"关联编号",field:"dataId",component:"Input",colProps:{span:8}},{label:"通知状态",field:"status",component:"Select",componentProps:{options:c(r.PAY_NOTIFY_STATUS)},colProps:{span:8}},{label:"商户订单编号",field:"merchantOrderId",component:"Input",colProps:{span:8}},{label:"创建时间",field:"createTime",component:"RangePicker",colProps:{span:8}}],w=[{label:"商户订单编号",field:"merchantOrderId"},{label:"通知状态",field:"status",render:e=>t.renderDict(e,r.PAY_NOTIFY_STATUS)},{label:"应用编号",field:"appId"},{label:"应用名称",field:"appName"},{label:"关联编号",field:"dataId"},{label:"通知类型",field:"type",render:e=>t.renderDict(e,r.PAY_NOTIFY_TYPE)},{label:"通知次数",field:"notifyTimes"},{label:"最大通知次数",field:"maxNotifyTimes"},{label:"最后通知时间",field:"lastExecuteTime",render:e=>t.renderDate(e)},{label:"下次通知时间",field:"nextNotifyTime",render:e=>t.renderDate(e)},{label:"创建时间",field:"createTime",render:e=>t.renderDate(e)},{label:"更新时间",field:"updateTime",render:e=>t.renderDate(e)}],N=[{title:"日志编号",dataIndex:"id",width:100},{title:"通知状态",dataIndex:"status",width:100,customRender:({text:e})=>t.renderDict(e,r.PAY_NOTIFY_STATUS)},{title:"通知次数",dataIndex:"notifyTimes",width:100},{title:"通知时间",dataIndex:"lastExecuteTime",width:100,customRender:({text:e})=>t.renderDate(e)},{title:"响应结果",dataIndex:"response",width:100}];function Y(e){return m.get({url:`/pay/notify/get-detail?id=${e}`})}function j(e){return m.get({url:"/pay/notify/page",params:e})}const z=T({name:"PayNotifyDetail",__name:"NotifyModal",setup(e){const n=s(),l=s([]),[p,{setModalProps:u}]=P(async d=>{const i=await Y(d.record.id);n.value=i,i.logs&&(l.value=i.logs),u({confirmLoading:!1})});return(d,i)=>(I(),h(a(b),x(d.$attrs,{width:"60%",title:"通知详情","show-ok-btn":!1,onRegister:a(p)}),{default:_(()=>[o(a(g),{bordered:!1,column:3,data:n.value,schema:a(w)},null,8,["data","schema"]),o(a(D)),o(a(y),{title:"回调日志",columns:a(N),"data-source":l.value,bordered:!0,pagination:!1,"can-resize":!0,"max-height":400},null,8,["columns","data-source"])]),_:1},16,["onRegister"]))}});export{z as _,L as c,j as g,U as s};
