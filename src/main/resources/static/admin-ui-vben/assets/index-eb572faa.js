import{c as U,d as R,f,v as re,o as u,h as b,F as ae,au as p,j as C,w as g,x as I,t as T,af as O,l as $,az as X,N as H,k as s,en as le,i as q,n as N,r as m,e4 as ie,b as ce,d5 as z,X as B,cT as ue,a6 as M,G as pe,a$ as x,aw as S,at as Z,ao as J,D as de,S as fe,s as ge,aH as he,aI as me,B as K,bZ as we,b8 as Q,d7 as ye,d4 as W,ar as ke,bs as De}from"./index-84bac5b8.js";import{A as ve}from"./ArrowLeftOutlined-c95cdb4d.js";import{D as Be}from"./index-28b63220.js";const{t:G}=U(),Y={confirmLoading:{type:Boolean},showCancelBtn:{type:Boolean,default:!0},cancelButtonProps:Object,cancelText:{type:String,default:G("common.cancelText")},showOkBtn:{type:Boolean,default:!0},okButtonProps:Object,okText:{type:String,default:G("common.okText")},okType:{type:String,default:"primary"},showFooter:{type:Boolean},footerHeight:{type:[String,Number],default:60}},be={isDetail:{type:Boolean},title:{type:String,default:""},loadingText:{type:String},showDetailBack:{type:Boolean,default:!0},open:{type:Boolean},loading:{type:Boolean},maskClosable:{type:Boolean,default:!0},getContainer:{type:[Object,String]},closeFunc:{type:[Function,Object],default:null},destroyOnClose:{type:Boolean},...Y},$e=R({name:"BasicDrawerFooter",__name:"DrawerFooter",props:{...Y,height:{type:String,default:"60px"}},emits:["ok","close"],setup(r,{emit:i}){const a=r,l=i,n=f(()=>{const o=`${a.height}`;return{height:o,lineHeight:`calc(${o} - 1px)`}});function d(){l("ok")}function t(){l("close")}return(o,w)=>{const h=re("a-button");return o.showFooter||o.$slots.footer?(u(),b("div",{key:0,class:"absolute bottom-0 left-0 w-full border-t-1 border-light-200 bg-white pl-5 pr-3 dark:bg-dark",style:X(n.value)},[o.$slots.footer?p(o.$slots,"footer",{key:1}):(u(),b(ae,{key:0},[p(o.$slots,"insertFooter"),o.showCancelBtn?(u(),C(h,O({key:0},o.cancelButtonProps,{class:"mr-2",onClick:t}),{default:g(()=>[I(T(o.cancelText),1)]),_:1},16)):$("",!0),p(o.$slots,"centerFooter"),o.showOkBtn?(u(),C(h,O({key:1,type:o.okType},o.okButtonProps,{class:"mr-2",loading:o.confirmLoading,onClick:d}),{default:g(()=>[I(T(o.okText),1)]),_:1},16,["type","loading"])):$("",!0),p(o.$slots,"appendFooter")],64))],4)):$("",!0)}}}),Ce={key:1},Pe={class:"flex-1"},Te={key:1},Oe={class:"pr-12.5"},Se=R({name:"BasicDrawerHeader",__name:"DrawerHeader",props:{isDetail:H.bool,showDetailBack:H.bool,title:H.string},emits:["close"],setup(r,{emit:i}){const a=i;function l(){a("close")}return(n,d)=>r.isDetail?(u(),b("div",Ce,[q("span",Pe,[r.showDetailBack?(u(),b("span",{key:0,onClick:l},[N(s(ve),{class:"cursor-pointer px-3"})])):$("",!0),r.title?(u(),b("span",Te,T(r.title),1)):$("",!0)]),q("span",Oe,[p(n.$slots,"titleToolbar")])])):(u(),C(s(le),{key:0,class:"h-full flex items-center"},{default:g(()=>[p(n.$slots,"title"),I(" "+T(n.$slots.title?"":r.title),1)]),_:3}))}}),Fe=R({inheritAttrs:!1,__name:"BasicDrawer",props:be,emits:["openChange","ok","close","register"],setup(r,{emit:i}){const a=r,l=i,n=m(!1),d=ie(),t=m(null),{t:o}=U(),{prefixVar:w,prefixCls:h}=ce("basic-drawer"),j={setDrawerProps:se,emitOpen:void 0},P=S();P&&l("register",j,P.uid);const E=f(()=>z(B(a),s(t))),k=f(()=>{const e={placement:"right",...s(d),...s(E),open:s(n)};e.title=void 0;const{isDetail:c,width:D,wrapClassName:v,getContainer:_}=e;if(c){D||(e.width="100%");const A=`${h}__detail`;e.rootClassName=v?`${v} ${A}`:A,_||(e.getContainer=`.${w}-layout-content`)}return e}),ee=f(()=>({...d,...s(k)})),V=f(()=>{const{footerHeight:e,showFooter:c}=s(k);return c&&e?ue(e)?`${e}px`:`${e.replace("px","")}px`:"0px"}),te=f(()=>({position:"relative",height:`calc(100% - ${s(V)})`})),oe=f(()=>!!s(k)?.loading);M(()=>a.open,(e,c)=>{e!==c&&(n.value=e)},{deep:!0}),M(()=>n.value,e=>{Z(()=>{l("openChange",e),P&&j.emitOpen?.(e,P.uid)})});async function F(e){const{closeFunc:c}=s(k);if(l("close",e),c&&J(c)){const D=await c();n.value=!D;return}n.value=!1}function se(e){t.value=z(s(t)||{},e),Reflect.has(e,"open")&&(n.value=!!e.open)}function ne(){l("ok")}return(e,c)=>{const D=pe("loading");return u(),C(s(Be),O(ee.value,{onClose:F}),x({default:g(()=>[de((u(),C(s(fe),{style:X(te.value),"loading-tip":e.loadingText||s(o)("common.loadingText")},{default:g(()=>[p(e.$slots,"default")]),_:3},8,["style","loading-tip"])),[[D,oe.value]]),N($e,O(k.value,{height:V.value,onClose:F,onOk:ne}),x({_:2},[ge(Object.keys(e.$slots),v=>({name:v,fn:g(_=>[p(e.$slots,v,he(me(_||{})))])}))]),1040,["height"])]),_:2},[e.$slots.title?{name:"title",fn:g(()=>[p(e.$slots,"title")]),key:"1"}:{name:"title",fn:g(()=>[N(Se,{title:E.value.title,"is-detail":e.isDetail,"show-detail-back":e.showDetailBack,onClose:F},{titleToolbar:g(()=>[p(e.$slots,"titleToolbar")]),_:3},8,["title","is-detail","show-detail-back"])]),key:"0"}]),1040)}}});const y=K({}),L=K({});function Ne(){if(!S())throw new Error("useDrawer() can only be used inside setup() or functional components!");const r=m(null),i=m(!1),a=m(0);function l(t,o){Q(()=>{r.value=null,i.value=null,y[s(a)]=null}),!(s(i)&&ye()&&t===s(r))&&(a.value=o,r.value=t,i.value=!0,t.emitOpen=(w,h)=>{L[h]=w})}const n=()=>{const t=s(r);return t||W("useDrawer instance is undefined!"),t},d={setDrawerProps:t=>{n()?.setDrawerProps(t)},getOpen:f(()=>L[~~s(a)]),openDrawer:(t=!0,o,w=!0)=>{if(n()?.setDrawerProps({open:t}),!o)return;if(w){y[s(a)]=null,y[s(a)]=B(o);return}we(B(y[s(a)]),B(o))||(y[s(a)]=B(o))},closeDrawer:()=>{n()?.setDrawerProps({open:!1})}};return[l,d]}function Le(r){const i=m(null),a=S(),l=m(0);if(!S())throw new Error("useDrawerInner() can only be used inside setup() or functional components!");const n=()=>{const t=s(i);if(!t){W("useDrawerInner instance is undefined!");return}return t},d=(t,o)=>{Q(()=>{i.value=null}),l.value=o,i.value=t,a?.emit("register",t,o)};return ke(()=>{const t=y[s(l)];t&&(!r||!J(r)||Z(()=>{r(t)}))}),[d,{changeLoading:(t=!0)=>{n()?.setDrawerProps({loading:t})},changeOkLoading:(t=!0)=>{n()?.setDrawerProps({confirmLoading:t})},getOpen:f(()=>L[~~s(l)]),closeDrawer:()=>{n()?.setDrawerProps({open:!1})},setDrawerProps:t=>{n()?.setDrawerProps(t)}}]}const Re=De(Fe);export{Re as B,Ne as a,Le as u};
