import{L as r,d as w,c as x,r as C,k as t,o as y,j as P,w as R,n as b,af as M,y as S}from"./index-2b36f9e3.js";import"./index-238a0b12.js";import"./BasicForm.vue_vue_type_style_index_0_lang-da06c4a7.js";import{a as T,B as D}from"./index-ab29420a.js";import"./sortable.esm-f208c0d8.js";import{u as c}from"./useRender-e7048bde.js";import{D as l,g as O}from"./dict-d92cc9bc.js";import{u as k,_ as v}from"./useForm-2cb760a4.js";const H=[{title:"编号",dataIndex:"id",width:100},{title:"类型",dataIndex:"type",width:80,customRender:({text:e})=>c.renderDict(e,l.SYSTEM_ERROR_CODE_TYPE)},{title:"应用名",dataIndex:"applicationName",width:200},{title:"错误码编码",dataIndex:"code",width:120},{title:"错误码提示",dataIndex:"message",width:300},{title:"备注",dataIndex:"memo",width:200},{title:"创建时间",dataIndex:"createTime",width:180,customRender:({text:e})=>c.renderDate(e)}],W=[{label:"错误码类型",field:"type",component:"Select",componentProps:{options:O(l.SYSTEM_ERROR_CODE_TYPE)},colProps:{span:8}},{label:"应用名",field:"applicationName",component:"Input",colProps:{span:8}},{label:"错误码编码",field:"code",component:"Input",colProps:{span:8}},{label:"错误码提示",field:"message",component:"Input",colProps:{span:8}},{label:"创建时间",field:"createTime",component:"RangePicker",colProps:{span:8}}],B=[{label:"编号",field:"id",show:!1,component:"Input"},{label:"应用名",field:"applicationName",required:!0,component:"Input"},{label:"错误码编码",field:"code",required:!0,component:"Input"},{label:"错误码提示",field:"message",required:!0,component:"Input"},{label:"备注",field:"memo",component:"InputTextArea"}];function z(e){return r.get({url:"/system/error-code/page",params:e})}function F(e){return r.get({url:`/system/error-code/get?id=${e}`})}function Y(e){return r.post({url:"/system/error-code/create",data:e})}function L(e){return r.put({url:"/system/error-code/update",data:e})}function J(e){return r.delete({url:`/system/error-code/delete?id=${e}`})}function K(e){return r.download({url:"/system/error-code/export-excel",params:e},"错误码.xls")}const Q=w({name:"SystemErrorCodeModal",__name:"ErrorCodeModal",emits:["success","register"],setup(e,{emit:d}){const p=d,{t:a}=x(),{createMessage:m}=S(),s=C(!0),[u,{setFieldsValue:f,resetFields:g,validate:_}]=k({labelWidth:120,baseColProps:{span:24},schemas:B,showActionButtonGroup:!1,actionColOptions:{span:23}}),[I,{setModalProps:n,closeModal:h}]=T(async o=>{if(g(),n({confirmLoading:!1}),s.value=!!o?.isUpdate,t(s)){const i=await F(o.record.id);f({...i})}});async function E(){try{const o=await _();n({confirmLoading:!0}),t(s)?await L(o):await Y(o),h(),p("success"),m.success(a("common.saveSuccessText"))}finally{n({confirmLoading:!1})}}return(o,i)=>(y(),P(t(D),M(o.$attrs,{title:s.value?t(a)("action.edit"):t(a)("action.create"),onRegister:t(I),onOk:E}),{default:R(()=>[b(t(v),{onRegister:t(u)},null,8,["onRegister"])]),_:1},16,["title","onRegister"]))}});export{Q as _,H as c,J as d,K as e,z as g,W as s};
