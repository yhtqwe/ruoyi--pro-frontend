import{L as n,d as h,c as _,o as w,j as x,w as R,n as y,k as r,af as D,y as O}from"./index-2b36f9e3.js";import"./index-238a0b12.js";import"./BasicForm.vue_vue_type_style_index_0_lang-da06c4a7.js";import{a as b,B as P}from"./index-ab29420a.js";import"./sortable.esm-f208c0d8.js";import{u as t}from"./useRender-e7048bde.js";import{D as s,g as T}from"./dict-d92cc9bc.js";import{u as M,_ as v}from"./useForm-2cb760a4.js";const j=[{title:"订单编号",dataIndex:"id",width:100},{title:"用户编号",dataIndex:"userId",width:100},{title:"商品名字",dataIndex:"spuName",width:100},{title:"支付价格",dataIndex:"price",width:100,customRender:({text:e})=>t.renderTag(`￥${(e/100).toFixed(2)}`)},{title:"退款金额",dataIndex:"refundPrice",width:100,customRender:({text:e})=>t.renderTag(`￥${(e/100).toFixed(2)}`)},{title:"支付单号",dataIndex:"payOrderId",width:100},{title:"创建时间",dataIndex:"createTime",width:180,customRender:({text:e})=>t.renderDate(e)},{title:"是否支付",dataIndex:"payed",width:100,customRender:({text:e})=>t.renderDict(e,s.INFRA_BOOLEAN_STRING)},{title:"支付时间",dataIndex:"payTime",width:180,customRender:({text:e})=>t.renderDate(e)},{title:"退款时间",dataIndex:"refundTime",width:180,customRender:({text:e})=>t.renderDate(e)}],q=[{label:"支付单号",field:"payOrderId",component:"Input",colProps:{span:8}},{label:"是否支付",field:"payed",component:"Select",componentProps:{options:T(s.INFRA_BOOLEAN_STRING)},colProps:{span:8}}],F=[{label:"商品",field:"spuId",component:"Select",required:!0,componentProps:{options:[{value:1,label:"华为手机",price:1},{value:2,label:"小米电视",price:10},{value:3,label:"苹果手表",price:100},{value:4,label:"华硕笔记本",price:1e3},{value:5,label:"蔚来汽车",price:2e5}]}}];function H(e){return n.get({url:"/pay/demo-order/page",params:e})}function N(e){return n.post({url:"/pay/demo-order/create",data:e})}function V(e){return n.put({url:`/pay/demo-order/refund?id=${e}`})}const W=h({name:"PayDemoModal",__name:"DemoModal",emits:["success","register"],setup(e,{emit:d}){const i=d,{t:c}=_(),{createMessage:l}=O(),[u,{resetFields:m,validate:p}]=M({labelWidth:120,baseColProps:{span:24},schemas:F,showActionButtonGroup:!1,actionColOptions:{span:23}}),[f,{setModalProps:a,closeModal:g}]=b(async()=>{m(),a({confirmLoading:!1})});async function I(){try{const o=await p();a({confirmLoading:!0}),await N(o),g(),i("success"),l.success(c("common.saveSuccessText"))}finally{a({confirmLoading:!1})}}return(o,S)=>(w(),x(r(P),D(o.$attrs,{title:"发起订单",onRegister:r(f),onOk:I}),{default:R(()=>[y(r(v),{onRegister:r(u)},null,8,["onRegister"])]),_:1},16,["onRegister"]))}});export{W as _,j as c,H as g,V as r,q as s};
