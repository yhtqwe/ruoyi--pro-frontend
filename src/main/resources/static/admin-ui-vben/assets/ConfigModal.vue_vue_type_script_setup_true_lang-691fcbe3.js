import{d as w,c as _,r as y,k as e,o as x,j as P,w as k,n as C,af as R,y as v}from"./index-84bac5b8.js";import"./index-1beb4355.js";import"./BasicForm.vue_vue_type_style_index_0_lang-f40c69bb.js";import{a as F,B as M}from"./index-173d5d49.js";import"./sortable.esm-f208c0d8.js";import{u as r}from"./useRender-70a86cea.js";import{D as l,g as T}from"./dict-5c702769.js";import{u as B,_ as D}from"./useForm-9e126d4c.js";import{g as N,u as O,c as S}from"./index-269e0d6f.js";const W=[{title:"参数主键",dataIndex:"id",width:100},{title:"参数分类",dataIndex:"category",width:180},{title:"参数名称",dataIndex:"name",width:100},{title:"参数键名",dataIndex:"key",width:120},{title:"参数键值",dataIndex:"value",width:120},{title:"系统内置",dataIndex:"type",width:180,customRender:({text:a})=>r.renderDict(a,l.INFRA_CONFIG_TYPE)},{title:"是否可见",dataIndex:"visible",width:180,customRender:({text:a})=>r.renderTag(a?"是":"否")},{title:"备注",dataIndex:"remark",width:180},{title:"创建时间",dataIndex:"createTime",width:180,customRender:({text:a})=>r.renderDate(a)}],z=[{label:"参数名称",field:"name",component:"Input",colProps:{span:8}},{label:"参数键名",field:"key",component:"Input",colProps:{span:8}},{label:"系统内置",field:"type",component:"Select",componentProps:{options:T(l.INFRA_CONFIG_TYPE)},colProps:{span:8}},{label:"创建时间",field:"createTime",component:"RangePicker",colProps:{span:8}}],q=[{label:"编号",field:"id",show:!1,component:"Input"},{label:"参数分类",field:"category",required:!0,component:"Input"},{label:"参数名称",field:"name",required:!0,component:"Input"},{label:"参数键名",field:"key",required:!0,component:"Input"},{label:"参数键值",field:"value",required:!0,component:"Input"},{label:"是否可见",field:"visible",component:"RadioGroup",componentProps:{options:[{key:!0,label:"是",value:!0},{key:!1,label:"否",value:!1}]}},{label:"备注",field:"remark",component:"InputTextArea"}],H=w({name:"InfraConfigModal",__name:"ConfigModal",emits:["success","register"],setup(a,{emit:c}){const d=c,{t:n}=_(),{createMessage:p}=v(),o=y(!0),[m,{setFieldsValue:u,resetFields:f,validate:g}]=B({labelWidth:120,baseColProps:{span:24},schemas:q,showActionButtonGroup:!1,actionColOptions:{span:23}}),[I,{setModalProps:s,closeModal:h}]=F(async t=>{if(f(),s({confirmLoading:!1}),o.value=!!t?.isUpdate,e(o)){const i=await N(t.record.id);u({...i})}});async function b(){try{const t=await g();s({confirmLoading:!0}),e(o)?await O(t):await S(t),h(),d("success"),p.success(n("common.saveSuccessText"))}finally{s({confirmLoading:!1})}}return(t,i)=>(x(),P(e(M),R(t.$attrs,{title:o.value?e(n)("action.edit"):e(n)("action.create"),onRegister:e(I),onOk:b}),{default:k(()=>[C(e(D),{onRegister:e(m)},null,8,["onRegister"])]),_:1},16,["title","onRegister"]))}});export{H as _,W as c,z as s};
