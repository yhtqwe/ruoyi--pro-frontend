import{b as i}from"./account-e11a78bd.js";import{b1 as d,S as c,L as t}from"./index-84bac5b8.js";import"./index-1beb4355.js";import"./BasicForm.vue_vue_type_style_index_0_lang-f40c69bb.js";import"./index-173d5d49.js";import"./sortable.esm-f208c0d8.js";import{u as o}from"./useRender-70a86cea.js";import{D as n,g as s}from"./dict-5c702769.js";const S=[{title:"模板编码",dataIndex:"code",width:100},{title:"模板名称",dataIndex:"name",width:180},{title:"模板标题",dataIndex:"title",width:100},{title:"模板内容",dataIndex:"content",width:300},{title:"邮箱账号",dataIndex:"accountId",width:120},{title:"发送人名称",dataIndex:"nickname",width:100},{title:"开启状态",dataIndex:"status",width:180,customRender:({text:e})=>o.renderDict(e,n.COMMON_STATUS)},{title:"创建时间",dataIndex:"createTime",width:180,customRender:({text:e})=>o.renderDate(e)}],T=[{label:"模板名称",field:"name",component:"Input",colProps:{span:8}},{label:"模板编码",field:"code",component:"Input",colProps:{span:8}},{label:"发件邮箱",field:"accountId",component:"ApiSelect",componentProps:{api:()=>i(),fieldNames:{label:"mail",key:"id",value:"id"}},colProps:{span:8}},{label:"开启状态",field:"status",component:"Select",componentProps:{options:s(n.COMMON_STATUS)},colProps:{span:8}},{label:"创建时间",field:"createTime",component:"RangePicker",colProps:{span:8}}],x=[{label:"编号",field:"id",show:!1,component:"Input"},{label:"模板名称",field:"name",required:!0,component:"Input"},{label:"模板编码",field:"code",required:!0,component:"Input",helpMessage:"建议使用下划线/数字/字母命名"},{label:"发件邮箱",field:"accountId",required:!0,component:"ApiSelect",componentProps:{api:()=>i(),fieldNames:{label:"mail",key:"id",value:"id"}}},{label:"发送人名称",field:"nickname",required:!0,component:"Input",helpMessage:"发件人的名称, 如:系统发件人"},{label:"模板标题",field:"title",required:!0,component:"Input",helpMessage:"邮件的标题"},{label:"模板内容",field:"content",component:"Editor",required:!0,helpMessage:"{}括号中的内容作为模板参数"},{label:"开启状态",field:"status",component:"Select",defaultValue:0,componentProps:{options:s(n.COMMON_STATUS)}},{label:"备注",field:"remark",component:"InputTextArea"}],r="key$-",P=[{field:"code",label:"编码",component:"Input",show:()=>!1},{field:"content",component:"Editor",label:"模板内容 ",required:!1,defaultValue:"",render({model:e}){let a=e.content;return Object.keys(e).forEach(l=>{if(!l.startsWith(r))return;const p=l.split(r)[1];a=a.replace(`{${p}}`,e[l])}),d(c,{innerHTML:a,style:{border:"1px solid #e8e8e8",borderRadius:"6px",padding:"10px"}})}},{field:"mail",label:"收件邮箱 ",component:"Input",componentProps:{placeholder:"输入收件邮箱"},required:!0,rules:[{required:!0,pattern:/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\\.[a-zA-Z0-9-]+)*\.[a-zA-Z0-9]{2,6}$/,trigger:"blur",message:"邮箱格式不正确"}]}];function y(e){return t.post({url:"/system/mail-template/create",data:e})}function A(e){return t.put({url:"/system/mail-template/update",data:e})}function w(e){return t.delete({url:`/system/mail-template/delete?id=${e}`})}function q(e){return t.get({url:`/system/mail-template/get?id=${e}`})}function k(e){return t.get({url:"/system/mail-template/page",params:e})}function O(e){return t.post({url:"/system/mail-template/send-mail",data:e})}export{k as a,P as b,y as c,S as d,T as e,x as f,q as g,w as h,r as k,O as s,A as u};
