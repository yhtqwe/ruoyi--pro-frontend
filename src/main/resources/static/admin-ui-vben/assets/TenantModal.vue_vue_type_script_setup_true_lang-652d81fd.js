import{g as x}from"./index-2f314944.js";import{L as a,d as M,c as P,r as S,k as t,o as _,j as y,w as k,n as C,af as R,y as D}from"./index-84bac5b8.js";import"./index-1beb4355.js";import"./BasicForm.vue_vue_type_style_index_0_lang-f40c69bb.js";import{a as O,B as F}from"./index-173d5d49.js";import"./sortable.esm-f208c0d8.js";import{u as s}from"./useRender-70a86cea.js";import{D as l,g as d}from"./dict-5c702769.js";import{u as N,_ as v}from"./useForm-9e126d4c.js";const z=[{title:"租户编号",dataIndex:"id",width:100},{title:"租户名",dataIndex:"name",width:180},{title:"租户套餐",dataIndex:"packageId",width:100},{title:"联系人",dataIndex:"contactName",width:120},{title:"联系手机",dataIndex:"contactMobile",width:120},{title:"账号额度",dataIndex:"accountCount",width:120,customRender:({text:e})=>s.renderTag(e)},{title:"过期时间",dataIndex:"expireTime",width:180,customRender:({text:e})=>s.renderDate(e)},{title:"绑定域名",dataIndex:"domain",width:200},{title:"租户状态",dataIndex:"status",width:180,customRender:({text:e})=>s.renderDict(e,l.COMMON_STATUS)},{title:"备注",dataIndex:"remark",width:180},{title:"创建时间",dataIndex:"createTime",width:180,customRender:({text:e})=>s.renderDate(e)}],J=[{label:"租户名",field:"name",component:"Input",colProps:{span:8}},{label:"联系人",field:"contactName",component:"Input",colProps:{span:8}},{label:"联系手机",field:"contactMobile",component:"Input",colProps:{span:8}},{label:"状态",field:"status",component:"Select",componentProps:{options:d(l.COMMON_STATUS)},colProps:{span:8}},{label:"创建时间",field:"createTime",component:"RangePicker",colProps:{span:8}}],q=[{label:"编号",field:"id",show:!1,component:"Input"},{label:"租户名",field:"name",required:!0,component:"Input"},{label:"租户套餐",field:"packageId",required:!0,component:"ApiSelect",componentProps:{api:()=>x(),labelField:"name",valueField:"id"}},{label:"联系人",field:"contactName",required:!0,component:"Input"},{label:"联系手机",field:"contactMobile",component:"Input"},{label:"用户名称",field:"username",component:"Input",ifShow:({values:e})=>!e.id},{label:"用户密码",field:"password",component:"InputPassword",ifShow:({values:e})=>!e.id},{label:"账号额度",field:"accountCount",required:!0,defaultValue:0,component:"InputNumber"},{label:"过期时间",field:"expireTime",required:!0,component:"DatePicker",componentProps:{showTime:!0,format:"YYYY-MM-DD HH:mm:ss",valueFormat:"x"}},{label:"绑定域名",field:"domain",required:!0,component:"Input"},{label:"租户状态",field:"status",component:"Select",componentProps:{options:d(l.COMMON_STATUS)}}];function K(e){return a.get({url:"/system/tenant/page",params:e})}function A(e){return a.get({url:`/system/tenant/get?id=${e}`})}function B(e){return a.post({url:"/system/tenant/create",data:e})}function L(e){return a.put({url:"/system/tenant/update",data:e})}function Q(e){return a.delete({url:`/system/tenant/delete?id=${e}`})}function X(e){return a.download({url:"/system/tenant/export-excel",params:e},"租户.xls")}const Z=M({name:"SystemTenantModal",__name:"TenantModal",emits:["success","register"],setup(e,{emit:u}){const m=u,{t:r}=P(),{createMessage:p}=D(),o=S(!0),[f,{setFieldsValue:g,resetFields:I,validate:w}]=N({labelWidth:120,baseColProps:{span:24},schemas:q,showActionButtonGroup:!1,actionColOptions:{span:23}}),[b,{setModalProps:i,closeModal:h}]=O(async n=>{if(I(),i({confirmLoading:!1}),o.value=!!n?.isUpdate,t(o)){const c=await A(n.record.id);g({...c})}});async function T(){try{const n=await w();i({confirmLoading:!0}),t(o)?await L(n):await B(n),h(),m("success"),p.success(r("common.saveSuccessText"))}finally{i({confirmLoading:!1})}}return(n,c)=>(_(),y(t(F),R(n.$attrs,{title:o.value?t(r)("action.edit"):t(r)("action.create"),onRegister:t(b),onOk:T}),{default:k(()=>[C(t(v),{onRegister:t(f)},null,8,["onRegister"])]),_:1},16,["title","onRegister"]))}});export{Z as _,z as c,Q as d,X as e,K as g,J as s};
