import{f as _}from"./role.data-11ad06f2.js";import{d as M,c as R,r as h,k as e,o as w,j as y,w as v,n as B,af as k,y as C}from"./index-84bac5b8.js";import{u as F,_ as S}from"./useForm-9e126d4c.js";import"./BasicForm.vue_vue_type_style_index_0_lang-f40c69bb.js";import{a as b,B as x}from"./index-173d5d49.js";import{g as L,u as P,c as I}from"./index-6782430b.js";const N=M({name:"SystemRoleModal",__name:"RoleModal",emits:["success","register"],setup(O,{emit:i}){const n=i,{t:o}=R(),{createMessage:c}=C(),a=h(!0),[l,{setFieldsValue:m,resetFields:u,validate:d}]=F({labelWidth:120,baseColProps:{span:24},schemas:_,showActionButtonGroup:!1,actionColOptions:{span:23}}),[f,{setModalProps:t,closeModal:p}]=b(async s=>{if(u(),t({confirmLoading:!1}),a.value=!!s?.isUpdate,e(a)){const r=await L(s.record.id);m({...r})}});async function g(){try{const s=await d();t({confirmLoading:!0}),e(a)?await P(s):await I(s),p(),n("success"),c.success(o("common.saveSuccessText"))}finally{t({confirmLoading:!1})}}return(s,r)=>(w(),y(e(x),k(s.$attrs,{title:a.value?e(o)("action.edit"):e(o)("action.create"),onRegister:e(f),onOk:g}),{default:v(()=>[B(e(S),{onRegister:e(l)},null,8,["onRegister"])]),_:1},16,["title","onRegister"]))}});export{N as _};
