import{d as R,N as E,r as w,V as A,b as I,Y as N,H as $,ar as D,v as S,o as i,h as v,n as V,w as k,k as u,q as T,c as L,an as O,a8 as j,ak as q,fx as z,j as b,M as G,l as H,t as y,x as Y,cZ as Z}from"./index-84bac5b8.js";import{B as F}from"./index-1c73a8ff.js";import"./DownOutlined-a8fe79f2.js";const J={key:1},W=R({name:"LayoutBreadcrumb",__name:"Breadcrumb",props:{theme:E.oneOf(["dark","light"])},setup(B){const m=w([]),{currentRoute:c}=A(),{prefixCls:f}=I("layout-breadcrumb"),{getShowBreadCrumbIcon:C}=N(),h=$(),{t:d}=L();D(async()=>{if(c.value.name===O)return;const n=await j(),t=c.value.matched,a=t?.[t.length-1];let e=c.value.path;a&&a?.meta?.currentActiveMenu&&(e=a.meta.currentActiveMenu);const s=q(n,e),o=n.filter(g=>g.path===s[0]),r=p(o,s);if(!r||r.length===0)return;const l=M(r);c.value.meta?.currentActiveMenu&&l.push({...c.value,name:c.value.meta?.title||c.value.name}),m.value=l});function p(n,t){const a=[];return n.forEach(e=>{t.includes(e.path)&&a.push({...e,name:e.meta?.title||e.name}),e.children?.length&&a.push(...p(e.children,t))}),a}function M(n){return z(n,t=>{const{meta:a,name:e}=t;if(!a)return!!e;const{title:s,hideBreadcrumb:o,hideMenu:r}=a;return!(!s||o||r)}).filter(t=>!t.meta?.hideBreadcrumb)}function x(n,t,a){a?.preventDefault();const{children:e,redirect:s,meta:o}=n;if(e?.length&&!s){a?.stopPropagation();return}if(!o?.carryParam)if(s&&Z(s))h(s);else{let r="";t.length===1?r=t[0]:r=`${t.slice(1).pop()||""}`,r=/^\//.test(r)?r:`/${r}`,h(r)}}function P(n,t){return n.indexOf(t)!==n.length-1}function _(n){return n.icon||n.meta?.icon}return(n,t)=>{const a=S("router-link");return i(),v("div",{class:T([u(f),`${u(f)}--${B.theme}`])},[V(u(F),{routes:m.value},{itemRender:k(({route:e,routes:s,paths:o})=>[u(C)&&_(e)?(i(),b(u(G),{key:0,icon:_(e)},null,8,["icon"])):H("",!0),P(s,e)?(i(),b(a,{key:2,to:"",onClick:r=>x(e,o,r)},{default:k(()=>[Y(y(u(d)(e.name||e.meta.title)),1)]),_:2},1032,["onClick"])):(i(),v("span",J,y(u(d)(e.name||e.meta.title)),1))]),_:1},8,["routes"])],2)}}});export{W as default};
