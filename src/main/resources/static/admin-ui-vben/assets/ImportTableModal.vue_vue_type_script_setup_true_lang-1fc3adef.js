import{g as b}from"./index-1c10723d.js";import{d as g,o as I,j as h,w,n as S,k as a,af as C}from"./index-2b36f9e3.js";import"./index-238a0b12.js";import"./BasicForm.vue_vue_type_style_index_0_lang-da06c4a7.js";import{a as T,B as _}from"./index-ab29420a.js";import"./sortable.esm-f208c0d8.js";import{u as s}from"./useRender-e7048bde.js";import{g as x,D as P}from"./dict-d92cc9bc.js";import{_ as R}from"./BasicTable.vue_vue_type_script_setup_true_lang-ba4f6a37.js";import{u as M}from"./useTable-f046c703.js";import"./index-23d73b40.js";import{a as N,c as k}from"./index-91404596.js";const n=await b(),U=[{title:"数据源",dataIndex:"dataSourceConfigId",width:100,customRender:({text:e})=>{for(const t of n)if(e===t.id)return t.name;return`未知【${e}】`}},{title:"表名称",dataIndex:"tableName",width:200},{title:"表描述",dataIndex:"tableComment",width:120},{title:"实体",dataIndex:"className",width:200},{title:"创建时间",dataIndex:"createTime",width:180,customRender:({text:e})=>s.renderDate(e)},{title:"更新时间",dataIndex:"updateTime",width:180,customRender:({text:e})=>s.renderDate(e)}],W=[{label:"表名称",field:"tableName",component:"Input",colProps:{span:8}},{label:"表描述",field:"tableComment",component:"Input",colProps:{span:8}},{label:"创建时间",field:"createTime",component:"RangePicker",colProps:{span:8}}];x(P.COMMON_STATUS);const D=[{title:"表名称",dataIndex:"name",width:200},{title:"表描述",dataIndex:"comment",width:120}],y=[{label:"数据源",field:"dataSourceConfigId",component:"Select",required:!0,defaultValue:n[0].id,componentProps:{options:n,fieldNames:{label:"name",value:"id"}},colProps:{span:8}},{label:"表名称",field:"name",component:"Input",colProps:{span:8}},{label:"表描述",field:"comment",component:"Input",colProps:{span:8}}],Y=g({name:"InfraImportTableModal",__name:"ImportTableModal",emits:["success","register"],setup(e,{emit:t}){const i=t,[l,{getSelectRowKeys:m,getForm:c}]=M({api:N,columns:D,formConfig:{labelWidth:80,schemas:y},rowSelection:{type:"checkbox"},rowKey:"name",useSearchForm:!0,pagination:!1,showTableSetting:!1,showIndexColumn:!1,immediate:!1}),[d,{setModalProps:p,closeModal:u}]=T(async()=>{p({confirmLoading:!1})});async function f(){const o=await m(),r=await c();await k({dataSourceConfigId:r.getFieldsValue().dataSourceConfigId,tableNames:o}),u(),i("success")}return(o,r)=>(I(),h(a(_),C(o.$attrs,{width:800,title:"导入",onRegister:a(d),onOk:f}),{default:w(()=>[S(a(R),{onRegister:a(l)},null,8,["onRegister"])]),_:1},16,["onRegister"]))}});export{Y as _,U as c,W as s};
