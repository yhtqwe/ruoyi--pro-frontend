import{a as _}from"./user.data-f174330c.js";import{d as M,c as R,o as h,j as w,w as I,n as y,k as e,af as B,y as F}from"./index-84bac5b8.js";import{u as U,_ as k}from"./useForm-9e126d4c.js";import"./BasicForm.vue_vue_type_style_index_0_lang-f40c69bb.js";import{a as C,B as S}from"./index-173d5d49.js";import{a as b}from"./index-51cef843.js";import{c as v,d as x}from"./index-b4088324.js";const N=M({name:"SystemUserRoleModal",__name:"UserRoleModal",emits:["success","register"],setup(L,{emit:r}){const t=r,{t:n}=R(),{createMessage:i}=F(),[c,{setFieldsValue:l,resetFields:m,validate:d}]=U({labelWidth:120,baseColProps:{span:24},schemas:_,showActionButtonGroup:!1,actionColOptions:{span:23}}),[u,{setModalProps:o,closeModal:f}]=C(async s=>{m(),o({confirmLoading:!1});const a=await b(s.record.id),g=await v(s.record.id);a.roleIds=g,l({...a})});async function p(){try{const s=await d();o({confirmLoading:!0}),await x({userId:s.id,roleIds:s.roleIds}),f(),t("success"),i.success(n("common.saveSuccessText"))}finally{o({confirmLoading:!1})}}return(s,a)=>(h(),w(e(S),B(s.$attrs,{title:"用户角色权限",onRegister:e(u),onOk:p}),{default:I(()=>[y(e(k),{onRegister:e(c)},null,8,["onRegister"])]),_:1},16,["onRegister"]))}});export{N as _};
