import{f as M,g as _,u as h,c as w}from"./template-06ea2902.js";import{d as y,c as T,r as v,k as e,o as B,j as k,w as C,n as F,af as R,y as S}from"./index-2b36f9e3.js";import{u as b,_ as x}from"./useForm-2cb760a4.js";import"./BasicForm.vue_vue_type_style_index_0_lang-da06c4a7.js";import{a as L,B as P}from"./index-ab29420a.js";const A=y({name:"SystemMailTemplateModal",__name:"TemplateModal",emits:["success","register"],setup(I,{emit:r}){const n=r,{t}=T(),{createMessage:c}=S(),a=v(!0),[l,{setFieldsValue:m,resetFields:u,validate:p}]=b({labelWidth:100,baseColProps:{span:24},schemas:M,showActionButtonGroup:!1,actionColOptions:{span:23}}),[d,{setModalProps:o,closeModal:f}]=L(async s=>{if(u(),o({confirmLoading:!1}),a.value=!!s?.isUpdate,e(a)){const i=await _(s.record.id);m({...i})}});async function g(){try{const s=await p();o({confirmLoading:!0}),e(a)?await h(s):await w(s),f(),n("success"),c.success(t("common.saveSuccessText"))}finally{o({confirmLoading:!1})}}return(s,i)=>(B(),k(e(P),R(s.$attrs,{title:a.value?e(t)("action.edit"):e(t)("action.create"),onRegister:e(d),onOk:g}),{default:C(()=>[F(e(x),{onRegister:e(l)},null,8,["onRegister"])]),_:1},16,["title","onRegister"]))}});export{A as _};
