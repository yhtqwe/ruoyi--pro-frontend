import{p as f}from"./data-544ddf46.js";import{d as g,c as w,r as _,o as M,j as P,w as h,n as B,k as e,af as b,y as k}from"./index-84bac5b8.js";import{u as v,_ as y}from"./useForm-9e126d4c.js";import"./BasicForm.vue_vue_type_style_index_0_lang-f40c69bb.js";import{a as C,B as R}from"./index-173d5d49.js";import{b as x}from"./profile-40ec6f8b.js";const G=g({name:"PasswordModal",__name:"PasswordModal",emits:["success","register"],setup(F,{emit:o}){const t=o,{t:r}=w(),{createMessage:n}=k(),i=_("修改密码"),[c,{resetFields:l,validate:m}]=v({labelWidth:120,baseColProps:{span:24},schemas:f,showActionButtonGroup:!1,actionColOptions:{span:23}}),[d,{setModalProps:a,closeModal:p}]=C(()=>{l(),a({confirmLoading:!1})});async function u(){try{const s=await m();await x(s.oldPassword,s.newPassword),a({confirmLoading:!0}),p(),t("success"),n.success(r("common.saveSuccessText"))}finally{a({confirmLoading:!1})}}return(s,L)=>(M(),P(e(R),b(s.$attrs,{title:i.value,onRegister:e(d),onOk:u}),{default:h(()=>[B(e(y),{onRegister:e(c)},null,8,["onRegister"])]),_:1},16,["title","onRegister"]))}});export{G as _};
